<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Slap it</title>
  <style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Arial', sans-serif;
  background: linear-gradient(135deg, #232526 0%, #2c3e50 100%);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  color: #e0e0e0;
  overflow-x: hidden;
}

.header {
  text-align: center;
  margin: 20px 0;
  animation: fadeInDown 1s ease-out;
}

.header h1 {
  font-size: clamp(2rem, 5vw, 4rem);
  background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
  margin-bottom: 10px;
}

.subtitle {
  font-size: 1.2rem;
  opacity: 0.85;
  font-weight: 300;
  color: #b2bec3;
}

.game-container {
  background: rgba(30, 30, 40, 0.85);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 30px;
  margin: 20px;
  box-shadow: 0 15px 35px rgba(0,0,0,0.7);
  border: 1px solid rgba(255,255,255,0.08);
  max-width: 900px;
  width: 100%;
  animation: fadeInUp 1s ease-out;
}

.controls {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
  align-items: center;
  margin-bottom: 30px;
}

.file-input-container {
  position: relative;
  overflow: hidden;
  display: inline-block;
}

.file-input-container input[type=file] {
  position: absolute;
  left: -9999px;
}

.file-input-label {
  background: linear-gradient(45deg, #222f3e, #485563);
  color: #feca57;
  padding: 12px 24px;
  border-radius: 50px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: bold;
  box-shadow: 0 4px 15px rgba(34, 47, 62, 0.5);
  border: 1px solid #485563;
}

.file-input-label:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(34, 47, 62, 0.7);
  background: linear-gradient(45deg, #485563, #222f3e);
}

.weapon-selector {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
  justify-content: center;
}

.weapon-btn {
  background: rgba(44, 62, 80, 0.7);
  border: 2px solid rgba(255, 255, 255, 0.1);
  color: #feca57;
  padding: 12px 20px;
  border-radius: 25px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: bold;
  backdrop-filter: blur(5px);
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

.weapon-btn:hover {
  background: rgba(44, 62, 80, 0.9);
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.4);
}

.weapon-btn.active {
  background: linear-gradient(45deg, #feca57, #ff9ff3);
  border-color: #feca57;
  color: #232526;
  transform: scale(1.05);
}

.selected-weapon {
  color: #feca57;
  font-weight: bold;
  font-size: 1.1rem;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
}

.canvas-container {
  position: relative;
  display: flex;
  justify-content: center;
  margin: 20px 0;
}

#gameCanvas {
  border: 3px solid rgba(255, 255, 255, 0.08);
  border-radius: 15px;
  background: #232526;
  max-width: 100%;
  height: auto;
  cursor: none;
  transition: all 0.3s ease;
  box-shadow: 0 10px 25px rgba(0,0,0,0.7);
}

#gameCanvas:hover {
  transform: scale(1.02);
  box-shadow: 0 15px 35px rgba(0,0,0,0.8);
}

.message-box {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  background: linear-gradient(45deg, #222f3e, #485563);
  border: 3px solid #feca57;
  border-radius: 20px;
  padding: 20px 30px;
  font-size: clamp(1.2rem, 3vw, 2rem);
  color: #feca57;
  display: none;
  z-index: 100;
  text-align: center;
  font-weight: bold;
  text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
  box-shadow: 0 10px 25px rgba(0,0,0,0.7);
  animation: bounce 0.5s ease-out;
  max-width: 80%;
  word-wrap: break-word;
}

.instructions {
  text-align: center;
  margin-top: 20px;
  padding: 20px;
  background: rgba(44, 62, 80, 0.7);
  border-radius: 15px;
  backdrop-filter: blur(5px);
  color: #feca57;
}

.instructions h3 {
  color: #ff9ff3;
  margin-bottom: 10px;
}

.instructions p {
  opacity: 0.9;
  line-height: 1.6;
}

@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes bounce {
  0%, 20%, 60%, 100% {
    transform: translate(-50%, -50%);
  }
  40% {
    transform: translate(-50%, -60%);
  }
  80% {
    transform: translate(-50%, -55%);
  }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

.shake {
  animation: shake 0.5s ease-in-out;
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
  .game-container {
    margin: 10px;
    padding: 20px;
  }
  
  .controls {
    flex-direction: column;
    gap: 15px;
  }
  
  .weapon-selector {
    gap: 10px;
  }
  
  .weapon-btn {
    padding: 10px 16px;
    font-size: 0.9rem;
  }
  
  #gameCanvas {
    width: 100%;
    max-width: 350px;
    height: 280px;
  }
  
  .message-box {
    font-size: 1.2rem;
    padding: 15px 20px;
  }
}

@media (max-width: 480px) {
  .header h1 {
    font-size: 2rem;
  }
  
  .subtitle {
    font-size: 1rem;
  }
  
  .weapon-btn {
    padding: 8px 12px;
    font-size: 0.8rem;
  }
  
  #gameCanvas {
    max-width: 280px;
    height: 210px;
  }
}
  </style>
</head>
    <audio id="slapSound" src="slipper.mp3"></audio>
    <audio id="oughSound" src="ough.mp3"></audio>
<body>
<body>
  <div class="header">
    <h1>SLAP IT</h1>
    <p class="subtitle">Relief any pent-up stress!</p>
  </div>
  <div class="game-container">
    <div class="controls">
      <div class="file-input-container">
        <input type="file" id="faceUpload" accept="image/png,image/jpeg,image/jpg,image/webp">
        <label for="faceUpload" class="file-input-label">
           Choose Target 
        </label>
      </div>
      
      <div class="weapon-selector">
        <button class="weapon-btn active" onclick="selectWeapon(0)"><slap class="png"></slap> Haath</button>
        <button class="weapon-btn" onclick="selectWeapon(1)"><slipper class="png"></slipper> Chappal</button>
        <button class="weapon-btn" onclick="selectWeapon(2)"><jhaadu class="png"></jhaadu> Jhaadu</button>
      </div>
      
      <div class="selected-weapon" id="selectedWeapon">Selected: Haath</div>
    </div>

    <div class="canvas-container">
      <canvas id="gameCanvas" width="600" height="450"></canvas>
      <div class="message-box" id="msgBox"></div>
    </div>

    <div class="instructions">
      <h3>ðŸŽ¯ How to Play</h3>
      <p>1. Upload a photo using the button above<br>
         2. Select your weapon of choice<br>
         3. Click on the face to unleash your stress!<br>
    </div>
  </div>

  <script>
    // Add weapon image sources
const weaponImages = [
  "slap.png",      // Haath
  "slipper.png",   // Chappal
  "broom.png"      // Jhaadu
];
const weaponImgs = weaponImages.map(src => {
  const img = new Image();
  img.src = src;
  return img;
});




// Weapon names
const weaponNames = ["Haath", "Chappal", "Jhaadu"];
let selectedWeapon = 0;

    const messages = [
      "Sorry! Won't do it again!",
      "Please forgive me!",
      "It was a mistake!",
      "Ouch! That hurt!",
      "I apologize sincerely!",
      "I'll be good, I promise!",
      "Have mercy on me!",
      "I've learned my lesson!",
      "I'm truly sorry!",
      "Please don't hurt me anymore!",
      "I am sorry I was ever born",
      "My whole existence is a mistake"
    ];
    let msgIndex = 0;

    // Canvas setup
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    let faceImg = null;
    let slapCount = 0;

    // Message box
    const msgBox = document.getElementById('msgBox');
    let msgTimeout = null;

    // Create audio context for slap sounds
    let audioContext;
    function createSlapSound() {
      if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
      }
      
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
      oscillator.frequency.exponentialRampToValueAtTime(50, audioContext.currentTime + 0.1);
      
      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
      
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.1);
    }

    // Enhanced drawing function
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      if (faceImg) {
        // Calculate dimensions to fit the image properly
        const canvasRatio = canvas.width / canvas.height;
        const imageRatio = faceImg.width / faceImg.height;
        
        let drawWidth, drawHeight, drawX, drawY;
        
        if (imageRatio > canvasRatio) {
          // Image is wider than canvas ratio
          drawWidth = canvas.width * 0.8;
          drawHeight = drawWidth / imageRatio;
        } else {
          // Image is taller than canvas ratio
          drawHeight = canvas.height * 0.8;
          drawWidth = drawHeight * imageRatio;
        }
        
        drawX = (canvas.width - drawWidth) / 2;
        drawY = (canvas.height - drawHeight) / 2;
        
        // Add subtle shadow
        ctx.shadowColor = 'rgba(0,0,0,0.3)';
        ctx.shadowBlur = 10;
        ctx.shadowOffsetX = 5;
        ctx.shadowOffsetY = 5;
        
        ctx.drawImage(faceImg, drawX, drawY, drawWidth, drawHeight);
        
        // Reset shadow
        ctx.shadowColor = 'transparent';
        ctx.shadowBlur = 0;
        ctx.shadowOffsetX = 0;
        ctx.shadowOffsetY = 0;
        
        // Store face bounds for hit detection
        window.faceBounds = {x: drawX, y: drawY, width: drawWidth, height: drawHeight};
      } else {
        // Draw placeholder
        ctx.fillStyle = 'rgba(0,0,0,0.1)';
        ctx.fillRect(50, 50, canvas.width - 100, canvas.height - 100);
        
        ctx.fillStyle = '#666';
        ctx.font = '24px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('Upload a photo to get started!', canvas.width/2, canvas.height/2 - 20);
        ctx.font = '18px Arial';
        ctx.fillText('ðŸ“¸ Choose your target above', canvas.width/2, canvas.height/2 + 20);
      }
      
      // Draw weapon cursor when hovering
      if (mouse.over && faceImg) {
        ctx.font = '60px Arial';
        ctx.textAlign = 'center';
        if (mouse.over && faceImg) {
  const img = weaponImgs[selectedWeapon];
  if (img.complete) {
    ctx.drawImage(img, mouse.x - 50, mouse.y - 50, 100, 100);
  }
}
      }
    }

    // Mouse tracking with mobile support
    const mouse = {x: 300, y: 225, over: false};
    
    // Mouse events
    canvas.addEventListener('mousemove', e => {
      const rect = canvas.getBoundingClientRect();
      mouse.x = e.clientX - rect.left;
      mouse.y = e.clientY - rect.top;
      mouse.over = true;
      draw();
    });
    
    canvas.addEventListener('mouseleave', () => {
      mouse.over = false;
      draw();
    });

    // Touch events for mobile
    canvas.addEventListener('touchmove', e => {
      e.preventDefault();
      const rect = canvas.getBoundingClientRect();
      const touch = e.touches[0];
      mouse.x = touch.clientX - rect.left;
      mouse.y = touch.clientY - rect.top;
      mouse.over = true;
      draw();
    });

    // Weapon selection
    function selectWeapon(idx) {
      selectedWeapon = idx;
      document.getElementById('selectedWeapon').textContent = "Selected: " + weaponNames[selectedWeapon];
      
      // Update button styles
      const buttons = document.querySelectorAll('.weapon-btn');
      buttons.forEach((btn, index) => {
        btn.classList.toggle('active', index === idx);
      });
      
      draw();
    }

    // Face upload
    document.getElementById('faceUpload').onchange = function(e) {
      const file = e.target.files[0];
      if (file) {
        // Validate file size (max 5MB)
        if (file.size > 5 * 1024 * 1024) {
          alert('File too large! Please choose an image under 5MB.');
          return;
        }
        
        const reader = new FileReader();
        reader.onload = function(evt) {
          faceImg = new Image();
          faceImg.onload = () => {
            draw();
            // Update file input label
            document.querySelector('.file-input-label').innerHTML = 'âœ… Photo Loaded!';
            setTimeout(() => {
              document.querySelector('.file-input-label').innerHTML = ' Choose Target Face';
            }, 2000);
          };
          faceImg.src = evt.target.result;
        };
        reader.readAsDataURL(file);
      }
    };

function playSound(src) {
  const sound = new Audio(src);
  sound.volume = 1;
  sound.play();
}

function handleSlap(x, y) {
  const bounds = window.faceBounds;
  if (!bounds) return; // No face loaded

  if (x >= bounds.x && x <= bounds.x + bounds.width &&
      y >= bounds.y && y <= bounds.y + bounds.height) {

    // Play slap sound
    playSound('slipper.mp3');

    // Play pain sound after a short delay
    setTimeout(() => {
      playSound('ough.mp3');
    }, 300);

    // Shake effect
    canvas.classList.add('shake');
    setTimeout(() => canvas.classList.remove('shake'), 500);

    // Show message
    showMessage(messages[msgIndex]);
    msgIndex = (msgIndex + 1) % messages.length;
    slapCount++;

  }
}

// Click event
canvas.addEventListener('click', function(e) {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  handleSlap(x, y);
});

// Touch event
canvas.addEventListener('touchstart', function(e) {
  e.preventDefault();
  const rect = canvas.getBoundingClientRect();
  const touch = e.touches[0];
  const x = touch.clientX - rect.left;
  const y = touch.clientY - rect.top;
  handleSlap(x, y);
});

    // Enhanced message display
    function showMessage(msg) {
      msgBox.textContent = msg;
      msgBox.style.display = 'block';
      
      if (msgTimeout) clearTimeout(msgTimeout);
      msgTimeout = setTimeout(() => {
        msgBox.style.display = 'none';
      }, 2000);
    }

    // Initialize audio on user interaction (required for modern browsers)
    document.addEventListener('click', () => {
      // Try to play a silent sound to enable audio
      slapSound.volume = 0.01;
      slapSound.play().then(() => {
        slapSound.volume = 1;
      }).catch(e => console.log('Audio initialization failed:', e));
    }, { once: true });

    // Responsive canvas sizing
    function resizeCanvas() {
      const container = document.querySelector('.canvas-container');
      const maxWidth = container.clientWidth - 40;
      
      if (window.innerWidth <= 768) {
        canvas.style.width = Math.min(350, maxWidth) + 'px';
        canvas.style.height = Math.min(280, maxWidth * 0.8) + 'px';
      } else {
        canvas.style.width = 'auto';
        canvas.style.height = 'auto';
      }
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // Initial draw
    draw();

    // Add some fun interactions
    canvas.addEventListener('mouseenter', () => {
      if (faceImg) {
        canvas.style.filter = 'brightness(1.1) contrast(1.1)';
      }
    });

    canvas.addEventListener('mouseleave', () => {
      canvas.style.filter = 'none';
    });
  </script>
</body>
</html>